<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Make More Time"><title>hadoop安装及伪分布式配置 | Ranranran</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">hadoop安装及伪分布式配置</h1><a id="logo" href="/.">Ranranran</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">hadoop安装及伪分布式配置</h1><div class="post-meta">Apr 19, 2018<span> | </span><span class="category"><a href="/categories/云计算/">云计算</a></span></div><div class="post-content"><h3 id="Centos7（VMware）中安装配置hadoop"><a href="#Centos7（VMware）中安装配置hadoop" class="headerlink" title="Centos7（VMware）中安装配置hadoop"></a>Centos7（VMware）中安装配置hadoop</h3><h4 id="环境："><a href="#环境：" class="headerlink" title="环境："></a>环境：</h4><p>  win10下VMware虚拟机CentOS 7系统</p>
<h4 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作:"></a>准备工作:</h4><ul>
<li>修改主机名<br><code>vi /etc/hostname
hadoop1</code></li>
<li><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">下载jdk</a>,本次安装的hadoop版本为2.9，需要jdk7或以上。</li>
<li><a href="http://mirrors.tuna.tsinghua.edu.cn/apache/hadoop/common/hadoop-2.9.0/hadoop-2.9.0.tar.gz" target="_blank" rel="noopener">下载hadoop</a>笔者下载的是2.9版本。</li>
<li>下载完成将jdk与hadoop压缩包通过ftp工具放入虚拟机/usr/local目录中<h4 id="安装jdk"><a href="#安装jdk" class="headerlink" title="安装jdk"></a>安装jdk</h4></li>
<li>Hadoop的编译及MapReduce的运行都需要使用JDK</li>
<li><code>rpm -ivh /usr/local/jdk-8u171-linux-x64.rpm</code>默认安装到/usr/java/下<br>-i install;-h (or –hash) 安装时输出hash记号 (“#”) ;-v 显示附加信息<h4 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h4></li>
<li><code>vi /etc/profile</code>打开profile文件</li>
<li><p>在文件最后添加如下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#set Java Environment</span><br><span class="line">export JAVA_HOME=/usr/java/jdk1.8.0_171-amd64</span><br><span class="line">export CLASSPATH=&quot;.:$JAVA_HOME/lob:$CLASSPATH&quot;</span><br><span class="line">export PATH=&quot;$JAVA_HOME/bin:$PATH&quot;</span><br></pre></td></tr></table></figure>
<p>刷新配置<br><code>source /etc/profile</code></p>
<h4 id="验证JDK是否安装成功"><a href="#验证JDK是否安装成功" class="headerlink" title="验证JDK是否安装成功"></a>验证JDK是否安装成功</h4></li>
<li>输入命令<br><code>java version</code></li>
<li>显示版本信息如下则安装成功<br><code>java version &quot;1.8.0_171&quot;
Java(TM) SE Runtime Environment (build 1.8.0_171-b11)
Java HotSpot(TM) 64-Bit Server VM (build 25.171-b11, mixed mode)</code></li>
<li>若版本信息不同则需要<a href="http://www.jb51.net/article/98402.htm" target="_blank" rel="noopener">手动设置系统默认JDK</a><h4 id="配置SSH免密码登录"><a href="#配置SSH免密码登录" class="headerlink" title="配置SSH免密码登录"></a>配置SSH免密码登录</h4></li>
<li><a href="http://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html" target="_blank" rel="noopener">ssh原理</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html" target="_blank" rel="noopener">数字签名是什么？</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2011/12/ssh_port_forwarding.html" target="_blank" rel="noopener">ssh应用</a></li>
<li>配置：<ol>
<li>到用户主目录下<br><code>cd</code></li>
<li>查看隐藏文件<br><code>ls -a</code> .ssh文件夹是存放密钥的。注意该文件夹是以“.”开头的，是隐藏文件。待会我们生成的密钥都会放到这个文件夹中。</li>
<li>生成密钥<br><code>ssh-keygen -t rsa</code><br>命令“ssh-keygen -t rsa”表示使用 rsa 加密方式生成密钥， 回车后，会提示三次输入信息，我们直接回车即可。</li>
<li>进入密钥文件夹，生成授权文件<br><code>cd .ssh/</code><br><code>cp id_rsa.pub authorized_keys</code><br>其中，命令“cp id_rsa.pub authorized_keys”用于生成授权文件。远程主机将用户的公钥保存在登录后的用户主目录$HOME/.ssh/authorized_keys文件中。公钥就是一段字符串，只要把它追加在authorized_keys文件的末尾就行了。</li>
<li>验证ssh免密登录<br><code>ssh localhost</code><br>这里为什么要使用 ssh 登录本机哪？因为 hadoop 在本机部署时，需要使用 ssh 访问。<br>注意：文件夹 “.ssh ” 中的三个文件的权限，是有要求的， ， “ 自己之外的任何人对每个文件都没有写权限” ” 。 另外 “.ssh ” 文件夹是700权限。如果权限有问题，会造成SSH访问失败。</li>
</ol>
</li>
</ul>
<h4 id="安装运行hadoop"><a href="#安装运行hadoop" class="headerlink" title="安装运行hadoop"></a>安装运行hadoop</h4><ul>
<li>解压<br><code>tar -zxvf /usr/local/hadoop-2.9.0.tar.gz -C /usr/local</code></li>
<li>改名<br><code>mv hadoop-2.9.0 hadoop</code><br>###伪分布式Hadoop的配置</li>
<li><p>可以把伪分布式的Hadoop看作只有一个节点的集群，在这个集群里，这个节点既是Master也是Slave；既是NameNode也是DataNode;既是JobTracker也是TaskTracker。</p>
<h4 id="伪分布式需要修改5个配置文件-在hadoop安装目录下-etc-hadoop中"><a href="#伪分布式需要修改5个配置文件-在hadoop安装目录下-etc-hadoop中" class="headerlink" title="伪分布式需要修改5个配置文件(在hadoop安装目录下/etc/hadoop中)"></a>伪分布式需要修改5个配置文件(在hadoop安装目录下/etc/hadoop中)</h4><ol>
<li>配置hadoop<br>第一个：hadoop-env.sh <figure class="highlight vim"><figcaption><span>hadoop-env.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#第<span class="number">27</span>行</span><br><span class="line">export JAVA_HOME=/usr/java/jdk1.<span class="number">8.0</span>_171-amd64</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>第二个：core-site.xml</p>
<pre><code>&lt;!-- 制定HDFS的老大（NameNode）的地址 --&gt;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">	&lt;name&gt;fs.defaultFS&lt;/name&gt;</span><br><span class="line">	&lt;value&gt;hdfs://hadoop1:9000&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!-- 指定hadoop运行时产生文件的存储目录 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">	&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line">	&lt;value&gt;/usr/local/hadoop/tmp&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br></pre></td></tr></table></figure>
</code></pre><p>第三个：hdfs-site.xml</p>
<pre><code>&lt;!-- 指定HDFS副本的数量 --&gt;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;name&gt;dfs.replication&lt;/name&gt;</span><br><span class="line">&lt;value&gt;1&lt;/value&gt;</span><br><span class="line"> &lt;/property&gt;</span><br></pre></td></tr></table></figure>
</code></pre><p>第四个：mapred-site.xml</p>
<pre><code><figure class="highlight plain"><figcaption><span>mapred-site.xml.template mapred-site.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vim mapred-site.xml</span><br><span class="line">&lt;!-- 指定mr运行在yarn上 --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">	&lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span><br><span class="line">	&lt;value&gt;yarn&lt;/value&gt;</span><br><span class="line">      &lt;/property&gt;</span><br></pre></td></tr></table></figure>
</code></pre><p>第五个：yarn-site.xml</p>
<pre><code><figure class="highlight plain"><figcaption><span>指定YARN的老大（ResourceManager）的地址 --></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">	&lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;</span><br><span class="line">	&lt;value&gt;hadoop1&lt;/value&gt;</span><br><span class="line">      &lt;/property&gt;</span><br><span class="line">&lt;!-- reducer获取数据的方式 --&gt;</span><br><span class="line">      &lt;property&gt;</span><br><span class="line">	&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</span><br><span class="line">	&lt;value&gt;mapreduce_shuffle&lt;/value&gt;</span><br><span class="line">      &lt;/property&gt;</span><br></pre></td></tr></table></figure>
</code></pre></li>
</ul>
<ol start="2">
<li><p>将hadoop添加到环境变量</p>
<figure class="highlight plain"><figcaption><span>/etc/profile</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> export JAVA_HOME=/usr/java/jdk1.8.0_171-amd64</span><br><span class="line"> export CLASSPATH=&quot;.:$JAVA_HOME/lob:$CLASSPATH&quot;</span><br><span class="line"> export HADOOP_HOME=/usr/local/hadoop</span><br><span class="line"> export PATH=&quot;$JAVA_HOME/bin:$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin&quot;</span><br><span class="line"></span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><p>格式化namenode（是对namenode进行初始化）<br> <code>hdfs namenode -format (hadoop namenode -format)</code></p>
</li>
<li><p>启动(hadoop目录下)<br><code>sbin/stall-all.sh</code></p>
</li>
<li><p>验证是否启动成功<br> 使用jps命令验证<br>3281 NodeManager<br>2709 NameNode<br>3016 SecondaryNameNode<br>3178 ResourceManager<br>2813 DataNode<br>8303 Jps<br>JVM中共运行了六个进程</p>
<ol start="6">
<li>关闭防火墙<br><code>systemctl stop firewalld.service</code> 停止firewall<br><code>systemctl disable firewalld.service</code>禁止firewall开机启动</li>
<li>增加windows下的host映射<br>C:\Windows\System32\drivers\etc\hosts<br>增加一条<br><code>yourIpAddr hadoop1</code><br><a href="http://hadoop1:50070" target="_blank" rel="noopener">http://hadoop1:50070</a> （HDFS管理界面）<br><img src="hdfs.png" alt="HDFS"><br><a href="http://hadoop1:8088" target="_blank" rel="noopener">http://hadoop1:8088</a> （MR管理界面）<br><img src="mr.png" alt="MR"></li>
</ol>
</li>
</ol>
</li>
</ol>
</div><div class="tags"><a href="/tags/hadoop/">hadoop</a><a href="/tags/centos/">centos</a></div><div class="post-nav"><a class="pre" href="/2018/04/20/运行第一个MapReduce/">运行第一个MapReduce</a><a class="next" href="/2018/04/05/JSP+Servlet+JDBC开发日记  day2/">JSP+Servlet+JDBC开发日记 day2</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/JSP-Servlet-JDBC开发日记/">JSP+Servlet+JDBC开发日记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/云计算/">云计算</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/">操作系统</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据结构与算法/">数据结构与算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活感悟/">生活感悟</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/组成原理/">组成原理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机网络/">计算机网络</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/hadoop-错误/" style="font-size: 15px;">hadoop 错误</a> <a href="/tags/jsp/" style="font-size: 15px;">jsp</a> <a href="/tags/JDBC/" style="font-size: 15px;">JDBC</a> <a href="/tags/hadoop/" style="font-size: 15px;">hadoop</a> <a href="/tags/分布式/" style="font-size: 15px;">分布式</a> <a href="/tags/centos/" style="font-size: 15px;">centos</a> <a href="/tags/servlet/" style="font-size: 15px;">servlet</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/模式匹配/" style="font-size: 15px;">模式匹配</a> <a href="/tags/思想/" style="font-size: 15px;">思想</a> <a href="/tags/基础/" style="font-size: 15px;">基础</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/05/09/再谈KMP——KMP的证明及优化/">再谈KMP——KMP的证明及优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/08/操作系统知识树/">操作系统知识总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/08/计算机组成原理知识树/">计算机组成原理知识汇总</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/08/计算机网络知树/">计算机网络知识汇总</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/05/hadoop错误汇总/">hadoop错误汇总</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/22/hadoop分布式配置及测试/">hadoop分布式配置及测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/20/shell script基础学习/">shell script基础学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/20/运行第一个MapReduce/">运行第一个MapReduce</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/19/hadoop安装及伪分布式配置/">hadoop安装及伪分布式配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/05/JSP+Servlet+JDBC开发日记  day2/">JSP+Servlet+JDBC开发日记 day2</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/Deeeeeeepth/" title="My Github" target="_blank">My Github</a><ul></ul><a href="http://www.rxdonny.com/" title="donny's blog" target="_blank">donny's blog</a><ul></ul><a href="http://www.hut.edu.cn/" title="hut" target="_blank">hut</a><ul></ul><a href="http://www.gunpowder.net.cn/" title="gunpowder's" target="_blank">gunpowder's</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Ranranran.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>